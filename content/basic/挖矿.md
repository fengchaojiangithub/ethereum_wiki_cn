---
title: "挖矿"
date: 2019-10-21T05:29:59+08:00
weight: 1009
menu:
    docs:
      name: "挖矿"
      parent: "basic"
---

挖矿这个词源于对加密货币与黄金的类比。黄金或贵金属很稀有，电子代币也是，增加总量的唯一方法就是挖矿。以太坊也是这样，发行的唯一办法就是挖矿。但是不像其他例子，挖矿也是通过在区块链中创建、验证、发行和传播区块来保护网络的方法。

挖以太币=保护网络=验证计算。

以太坊，和所有区块链技术一样，使用激励驱动的安全模式。共识基于选择具有最高总难度的区块。矿工创造区块，其他人检测有效性。区块只有在包含特定难度的工作量时才有效，还有其他合格性条件。请注意到以太坊Serenity里程碑，可能就会被取代（参考权益证明模型）。

以太坊区块链在很多方面与比特币区块链类似，但也有些不同。在区块链架构方面，以太坊和比特币之间最主要的的区别是，不像比特币，以太坊区块不仅包含交易列表也包含最近状态（merkle patricia特里结构的根散表编码在状态中更精确）除此之外，另外两个值，区块数和难度，也储存在区块中。

使用的工作量证明算法叫Ethash（Dagger-Hashimoto算法的改良版本），包括找到算法的随机数输入以使结果低于特定的难度阈值。工作量证明算法的意义在于，要找到这样一个随机数，没有比列举可能性更好的策略，而解决方法的验证琐碎又廉价。由于输出有均匀分布（是散表功能应用的结果），我们可以保证，平均而言，需要找到这样一个随机数的时间取决于难度阈值。这使得只通过操纵难度来控制找到新区块的时间成为可能。

正如协议中所描述的，难度动态调整的方式是每15秒整个网络会产生一个区块。我们说网络用15秒区块时间生产一个区块链。这个"心跳"基本上主要强调系统状态同步，保证不可能维持一个分叉（允许double spend）或被恶意分子重写历史，除非攻击者有半数以上的网络挖矿能力（即所谓的51%攻击）。

任何参与到网络的节点都可能是矿工，预期的挖矿收益和他们的（相对）挖矿能力或者说成正比，比如被网络总散表率标准化的，每秒尝试的随机数数量。

Ethash工作量证明是内存难解的，这使它能抵抗ASIC。内存难解性由工作量证明算法实现，需要选择依靠随机数和区块标题的固定资源的子集合。这个资源（几十亿字节大小的数据）叫做DAG。每3000个区块的DAG完全不同，125小时的窗口叫做epoch（大约5.2天），需要一点时间来生成。由于DAG只由区块高度决定，它可以被事先生成，如果没有被事先生成，客户端需要等到进程最后来生产区块。如果客户端没有预生成并提前缓存DAG，网络可能会在每个epoch过渡经历大规模区块延迟。注意不必要生成DAG以验证工作量证明，它可以在低CPU和小内存的状态下被验证。

在特殊情况下，从零开始创建节点的时候，只有在为现存epoch创建DAG的时候才会开始挖矿。

> 文章来源: wangxiaoming.com/blog/2016/07/11/e18/